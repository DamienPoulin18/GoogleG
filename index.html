<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Blox Fruits - Home</title>
    <!-- Favicon Google Docs par défaut pour la discrétion -->
    <link id="favicon" rel="icon" type="image/x-icon" href="https://ssl.gstatic.com">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background-color: black; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        #v-page { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: url('RedKing.png') center/cover; z-index: 10; transition: opacity 0.3s; }
        #p-container { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 20; background: white; }
        iframe { width: 100%; height: 100%; border: none; outline: none; }
        /* Anti-curieux : bloque la sélection de texte */
        * { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
    </style>
</head>
<body>

    <div id="v-page"></div>
    <div id="p-container"><iframe id="f-frame" src="about:blank"></iframe></div>

    <script>
        // CRYPTAGE ROT13 + BASE64 (Fortinet ne peut pas lire ça)
        const s = {
            k: "a2FzcG4=", // kaspn
            u: "aHR0cHM6Ly9xdWFzYXIudWIucGh1cmkuY2M=", // Quasar
            c: "aHR0cHM6Ly9jbGFzc3Jvb20uZ29vZ2xlLmNvbS91LzAvaA==", // Classroom
            t: "R29vZ2xlIERvY3MgLSBEZXZvaXJz" // Google Docs - Devoirs
        };

        let seq = "";

        // SÉCURITÉ : Bloquer clic droit, F12, Ctrl+U, Ctrl+S
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.onkeydown = function(e) {
            if (e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) || (e.ctrlKey && (e.keyCode == 85 || e.keyCode == 83))) {
                return false;
            }
        };

        document.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();

            // 1. PANIC KEY "Q" -> REMPLACE TOTALEMENT LA PAGE DANS L'HISTORIQUE
            if (key === 'q') {
                window.location.replace(atob(s.c));
                return;
            }

            // 2. ESCAPE -> FERMETURE ET NETTOYAGE
            if (e.key === 'Escape') {
                location.reload();
                return;
            }

            // 3. LOGIQUE D'ENTRÉE
            seq += key;
            if (seq.endsWith(atob(s.k))) {
                // Change l'URL pour un faux chemin de recherche
                window.history.pushState({}, "", "/viewer/auth/google-session-7721");
                boot();
            }
            if (seq.length > 20) seq = "";
        });

        // REVENIR EN ARRIÈRE (Bouton Précédent)
        window.onpopstate = () => {
            document.getElementById('p-container').style.display = 'none';
            document.getElementById('v-page').style.opacity = '1';
            document.getElementById('f-frame').src = 'about:blank';
            document.title = "Blox Fruits - Home";
        };

        function boot() {
            const container = document.getElementById('p-container');
            const frame = document.getElementById('f-frame');
            
            // On ne charge l'URL que si nécessaire
            if (frame.src === "about:blank") {
                frame.src = atob(s.u);
            }

            document.getElementById('v-page').style.opacity = '0';
            setTimeout(() => {
                container.style.display = 'block';
                document.title = atob(s.t);
                // Change le favicon pour Google Docs
                document.getElementById('favicon').href = "https://ssl.gstatic.com";
            }, 300);
        }
    </script>
</body>
</html>
