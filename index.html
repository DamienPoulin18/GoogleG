<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Blox Fruits - Home</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background-color: black; font-family: sans-serif; }
        #main-page { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-image: url('RedKing.png'); background-size: cover; background-position: center; z-index: 10; }
        #quasar-container { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 20; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <div id="main-page"></div>

    <div id="quasar-container">
        <iframe src="about:blank" id="site-iframe"></iframe>
    </div>

    <script>
        const CODE_SECRET = "kaspn";
        let toucheTapees = "";
        const PROXY_URL = "https://quasar.ub.phuri.cc";
        const CLASSROOM = "https://classroom.google.com";
        
        // L'URL BIDON qui apparaîtra dans la barre d'adresse
        // Note: Tu ne peux pas changer le NOM DE DOMAINE (ex: google.fr) 
        // pour des raisons de sécurité, mais tu peux changer tout ce qui vient après le /.
        const URL_BIDON = "/recherche-google-docs-devoirs"; 

        document.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();

            // PANIC KEY "Q" : Redirection brutale vers Classroom
            if (key === 'q') {
                window.location.replace(CLASSROOM);
                return;
            }

            toucheTapees += key;
            if (toucheTapees.endsWith(CODE_SECRET)) {
                
                // 1. CHANGE L'URL DANS LA BARRE D'ADRESSE SANS QUITTER LA PAGE
                // Cela crée une étape dans l'historique : le bouton "Précédent" fonctionnera.
                window.history.pushState({}, "Google Docs", URL_BIDON);
                
                ouvrirQuasar();
            }
        });

        // Gérer le bouton "Précédent" du navigateur pour revenir à l'image
        window.onpopstate = function() {
            document.getElementById('quasar-container').style.display = 'none';
            document.getElementById('main-page').style.display = 'block';
            document.title = "Blox Fruits - Home";
            document.getElementById('site-iframe').src = "about:blank";
        };

        function ouvrirQuasar() {
            const iframe = document.getElementById('site-iframe');
            if (iframe.src === "about:blank") iframe.src = PROXY_URL;
            document.getElementById('main-page').style.display = 'none';
            document.getElementById('quasar-container').style.display = 'block';
            document.title = "Google Docs";
        }
    </script>
</body>
</html>
